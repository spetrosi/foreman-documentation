[[Disabling_Weak_SSL_Encryption]]

== Disabling Weak Encryption

You might want to change the encryption settings for {Project} depending on the security requirements of your infrastructure or to fix vulnerabilities quickly. Use the following sections to disable weak SSL encryption and 64-bit cipher suites.

[[Disabling_Weak_SSL_2-0_and_3-0_Encryption]]
=== Disabling Weak SSL 2.0 and SSL 3.0 Encryption

Apache and Qpid services in {Project} have SSL encryption disabled by default, however, TLS 1.0 and 1.1 encryption is enabled. If your {Project} and {SmartProxy} fail Nessus scans because of encryption vulnerabilities, or your security infrastructure requires that you disable TSL 1.0 and TSL 1.1, complete this procedure on {Project} and {SmartProxy} to remove weak encryption.

.Procedure

. Open the `/etc/foreman-installer/custom-hiera.yaml` file for editing:
+
[options="nowrap" subs="+quotes,attributes"]
----
# vi /etc/foreman-installer/custom-hiera.yaml
----

. Add the following entry:
+
[options="nowrap"]
----
# Apache
apache::mod::ssl::ssl_protocol: [ 'ALL' , '-SSLv3' , '-TLSv1' , '-TLSv1.1' , '+TLSv1.2' ]
----

. Enter the `{foreman-installer}` command to configure Qpid to use TLS 1.2 only:
+
[options="nowrap" subs="+quotes,attributes"]
----
# {foreman-installer} \
--foreman-proxy-content-qpid-router-ssl-protocols=TLSv1.2
----

. Restart the `{foreman-maintain}` services:
+
[options="nowrap" subs="+quotes,attributes"]
----
# {foreman-maintain} service restart
----

[[Disabling_64-bit_Block_Size_Cipher_Suites]]
=== Disabling 64-bit Block Size Cipher Suites (SWEET32)

If you want to update your cipher suites for {Project}, you can edit the ciphers and then add your changes to the `/etc/foreman-installer/custom-hiera.yaml` file to make these changes persistent.

You can use the following procedure to update your cipher suite.

The minimum browser requirements for the following Ciphers is Firefox 27.

.Procedure

. Open the `/etc/foreman-installer/custom-hiera.yaml` file for editing:
+
[options="nowrap" subs="+quotes,attributes"]
----
# vi /etc/foreman-installer/custom-hiera.yaml
----
+
. Add the following entry for `apache`:
+
----
apache::mod::ssl::ssl_cipher: ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256
----
+
. Run the `{foreman-installer}` tool to add the changes to the Apache configuration:
+
[options="nowrap" subs="+quotes,attributes"]
----
# {installer-scenario}
----
